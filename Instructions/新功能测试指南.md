# 🧪 权限查看和管理功能测试指南

## 📋 功能概述
新增了用户权限查看和管理功能，包括：
1. 在用户管理表格中添加"查看权限"按钮
2. 权限查看/管理弹窗
3. 支持guest超级管理员编辑权限，其他用户只读

## 🚀 启动系统

### 1. 启动Mock服务器
```bash
node mockServer.js
```

### 2. 启动前端服务
```bash
npm run dev
```

## 🧪 测试步骤

### 测试1：guest超级管理员权限管理
1. **登录guest账户**
   - 用户名：`guest`
   - 密码：`21693`

2. **进入用户管理页面**
   - 点击导航栏"用户管理"

3. **测试查看权限功能**
   - 在用户列表中找到任意用户
   - 点击操作列的👁️查看按钮
   - 验证弹窗显示：
     - 用户信息（头像、姓名、邮箱、角色）
     - 当前权限列表和路径
     - 权限管理区域（可编辑）

4. **测试权限编辑功能**
   - 在权限管理区域勾选/取消勾选权限
   - 观察"已选择"和"可用"统计更新
   - 点击"保存更改"按钮
   - 验证成功提示

5. **验证权限生效**
   - 重新打开权限查看弹窗
   - 确认权限已更新

### 测试2：普通管理员只读权限
1. **登录admin账户**
   - 用户名：`admin`
   - 密码：`admin123`

2. **进入用户管理页面**
   - 点击导航栏"用户管理"

3. **测试只读查看**
   - 点击任意用户的👁️查看按钮
   - 验证弹窗显示：
     - 用户信息和当前权限（正常显示）
     - 权限管理区域被替换为"您没有权限修改用户权限设置"提示
     - 只有"关闭"按钮，没有"保存更改"按钮

### 测试3：创建用户时分配权限
1. **以guest身份登录**

2. **添加新用户**
   - 点击"添加用户"按钮
   - 填写用户基本信息
   - 在权限选择区域勾选多个权限
   - 点击"添加用户"

3. **验证新用户权限**
   - 在用户列表中找到新用户
   - 点击👁️查看按钮
   - 确认权限设置正确

## 📝 预期结果

### guest超级管理员
✅ 可以查看所有用户权限
✅ 可以编辑任意用户权限
✅ 权限更改立即保存到JSON文件
✅ 添加用户时可以选择权限

### admin普通管理员
✅ 可以查看所有用户权限
❌ 无法编辑用户权限
❌ 添加用户时无权限选择区域

### 普通用户
✅ 可以查看自己的权限
❌ 无法编辑权限

## 🎯 验证要点

1. **权限查看功能**
   - 权限卡片显示正确的页面标题、路径和描述
   - 空权限时显示友好提示

2. **权限编辑功能**
   - 只有guest能看到编辑界面
   - 权限选择实时更新统计
   - 保存成功后显示成功提示

3. **数据持久性**
   - 权限更改保存到routePermissions.json
   - 服务器重启后数据不丢失

4. **用户界面**
   - 响应式设计，移动端兼容
   - 加载状态显示
   - 错误处理友好

## 🐛 常见问题

1. **权限弹窗无法打开**
   - 检查Mock服务器是否正常运行
   - 查看浏览器控制台错误信息

2. **权限保存失败**
   - 确认routePermissions.json文件存在且可写
   - 检查Mock服务器日志

3. **界面显示异常**
   - 刷新页面重试
   - 检查网络连接

---

**测试完成后**请报告任何发现的问题或改进建议！